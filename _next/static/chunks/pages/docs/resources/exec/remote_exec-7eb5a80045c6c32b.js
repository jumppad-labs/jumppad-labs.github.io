(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[635],{4356:function(s,n,o){(window.__NEXT_P=window.__NEXT_P||[]).push(["/docs/resources/exec/remote_exec",function(){return o(2534)}])},2534:function(s,n,o){"use strict";o.r(n),o.d(n,{__N_SSG:function(){return t}});var e=o(5893),a=o(1151);function r(s){let n=Object.assign({h1:"h1",code:"code",p:"p",a:"a",h2:"h2",h3:"h3",pre:"pre"},(0,a.ah)(),s.components),{Intro:o}=n;return o||function(s,n){throw Error("Expected "+(n?"component":"object")+" `"+s+"` to be defined: you likely forgot to import, pass, or provide it.")}("Intro",!0),(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)(n.h1,{children:["Remote Exec ",(0,e.jsx)(n.code,{children:"remote_exec"})]}),"\n",(0,e.jsxs)(o,{children:[(0,e.jsx)(n.p,{children:"The Remove Exec resource allows the execution of arbitrary commands and scripts.\nExecution can either be in a stand alone container or can target an existing\nand running container."}),(0,e.jsx)(n.p,{children:"Documentation is work in progress, please see the old documentation at:"}),(0,e.jsx)(n.p,{children:(0,e.jsx)(n.a,{href:"https://shipyard.run/docs/resources/exec_remote",children:"https://shipyard.run/docs/resources/exec_remote"})})]}),"\n",(0,e.jsx)(n.h2,{id:"properties",children:"Properties"}),"\n",(0,e.jsx)(n.h2,{id:"examples",children:"Examples"}),"\n",(0,e.jsx)(n.h3,{children:"Remote Exec in Standalone Container"}),"\n",(0,e.jsx)(n.p,{children:"The following example executes a command to register a service in consul\nusing a stanalone container."}),"\n",(0,e.jsx)(n.pre,{language:"hcl",code:'resource "remote_exec" "exec_standalone" {\n  image {\n    name = "consul:1.7.2"\n  }\n  \n  network {\n    id = resource.network.local.meta.id\n  }\n\n  command = [\n    "consul",\n    "services",\n    "register",\n    "/config/redis.hcl"\n  ]\n\n  # Mount a volume containing the config\n  volume {\n    source = "./config"\n    destination = "/config"\n  }\n\n  environment = {\n    CONSUL_HTTP_ADDR = "http://${resource.container.consul.fqrn}:8500"\n  }\n}\n',children:(0,e.jsx)(n.code,{className:"language-hcl",children:'<span><span style="color: var(--shiki-token-keyword)">resource</span><span style="color: var(--shiki-token-string-expression)"> &quot;remote_exec&quot; &quot;exec_standalone&quot;</span><span style="color: var(--shiki-color-text)"> {</span></span>\n<span><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-keyword)">image</span><span style="color: var(--shiki-color-text)"> {</span></span>\n<span><span style="color: var(--shiki-color-text)">    name </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-string-expression)">&quot;consul:1.7.2&quot;</span></span>\n<span><span style="color: var(--shiki-color-text)">  }</span></span>\n<span><span style="color: var(--shiki-color-text)">  </span></span>\n<span><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-keyword)">network</span><span style="color: var(--shiki-color-text)"> {</span></span>\n<span><span style="color: var(--shiki-color-text)">    id </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> resource</span><span style="color: var(--shiki-token-constant)">.</span><span style="color: var(--shiki-color-text)">network</span><span style="color: var(--shiki-token-constant)">.</span><span style="color: var(--shiki-color-text)">local</span><span style="color: var(--shiki-token-constant)">.</span><span style="color: var(--shiki-color-text)">meta</span><span style="color: var(--shiki-token-constant)">.</span><span style="color: var(--shiki-color-text)">id</span></span>\n<span><span style="color: var(--shiki-color-text)">  }</span></span>\n<span></span>\n<span><span style="color: var(--shiki-color-text)">  command </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> [</span></span>\n<span><span style="color: var(--shiki-color-text)">    </span><span style="color: var(--shiki-token-string-expression)">&quot;consul&quot;</span><span style="color: var(--shiki-color-text)">,</span></span>\n<span><span style="color: var(--shiki-color-text)">    </span><span style="color: var(--shiki-token-string-expression)">&quot;services&quot;</span><span style="color: var(--shiki-color-text)">,</span></span>\n<span><span style="color: var(--shiki-color-text)">    </span><span style="color: var(--shiki-token-string-expression)">&quot;register&quot;</span><span style="color: var(--shiki-color-text)">,</span></span>\n<span><span style="color: var(--shiki-color-text)">    </span><span style="color: var(--shiki-token-string-expression)">&quot;/config/redis.hcl&quot;</span></span>\n<span><span style="color: var(--shiki-color-text)">  ]</span></span>\n<span></span>\n<span><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-comment)"># Mount a volume containing the config</span></span>\n<span><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-keyword)">volume</span><span style="color: var(--shiki-color-text)"> {</span></span>\n<span><span style="color: var(--shiki-color-text)">    source </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-string-expression)">&quot;./config&quot;</span></span>\n<span><span style="color: var(--shiki-color-text)">    destination </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-string-expression)">&quot;/config&quot;</span></span>\n<span><span style="color: var(--shiki-color-text)">  }</span></span>\n<span></span>\n<span><span style="color: var(--shiki-color-text)">  environment </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> {</span></span>\n<span><span style="color: var(--shiki-color-text)">    CONSUL_HTTP_ADDR = &quot;http://${resource.container.consul.fqrn}:</span><span style="color: var(--shiki-token-constant)">8500</span><span style="color: var(--shiki-token-string-expression)">&quot;</span></span>\n<span><span style="color: var(--shiki-token-string-expression)">  }</span></span>\n<span><span style="color: var(--shiki-token-string-expression)">}</span></span>\n<span></span>'})}),"\n",(0,e.jsx)(n.h3,{children:"Remote Exec in Existing Container"}),"\n",(0,e.jsx)(n.pre,{language:"hcl",code:'resource "remote_exec" "exec_standalone" {\n  target = resource.container.consul.meta.id\n\n  command = [\n    "consul"\n    "services",\n    "register",\n    "/config/redis.hcl"\n  ]\n}\n',children:(0,e.jsx)(n.code,{className:"language-hcl",children:'<span><span style="color: var(--shiki-token-keyword)">resource</span><span style="color: var(--shiki-token-string-expression)"> &quot;remote_exec&quot; &quot;exec_standalone&quot;</span><span style="color: var(--shiki-color-text)"> {</span></span>\n<span><span style="color: var(--shiki-color-text)">  target </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> resource</span><span style="color: var(--shiki-token-constant)">.</span><span style="color: var(--shiki-color-text)">container</span><span style="color: var(--shiki-token-constant)">.</span><span style="color: var(--shiki-color-text)">consul</span><span style="color: var(--shiki-token-constant)">.</span><span style="color: var(--shiki-color-text)">meta</span><span style="color: var(--shiki-token-constant)">.</span><span style="color: var(--shiki-color-text)">id</span></span>\n<span></span>\n<span><span style="color: var(--shiki-color-text)">  command </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> [</span></span>\n<span><span style="color: var(--shiki-color-text)">    </span><span style="color: var(--shiki-token-string-expression)">&quot;consul&quot;</span></span>\n<span><span style="color: var(--shiki-color-text)">    </span><span style="color: var(--shiki-token-string-expression)">&quot;services&quot;</span><span style="color: var(--shiki-color-text)">,</span></span>\n<span><span style="color: var(--shiki-color-text)">    </span><span style="color: var(--shiki-token-string-expression)">&quot;register&quot;</span><span style="color: var(--shiki-color-text)">,</span></span>\n<span><span style="color: var(--shiki-color-text)">    </span><span style="color: var(--shiki-token-string-expression)">&quot;/config/redis.hcl&quot;</span></span>\n<span><span style="color: var(--shiki-color-text)">  ]</span></span>\n<span><span style="color: var(--shiki-color-text)">}</span></span>\n<span></span>'})})]})}var t=!0;n.default=function(){let s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:n}=Object.assign({},(0,a.ah)(),s.components);return n?(0,e.jsx)(n,Object.assign({},s,{children:(0,e.jsx)(r,s)})):r(s)}}},function(s){s.O(0,[9774,2888,179],function(){return s(s.s=4356)}),_N_E=s.O()}]);