(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4414],{3985:function(e,n,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/docs/resources/local_exec",function(){return s(2953)}])},2953:function(e,n,s){"use strict";s.r(n),s.d(n,{__N_SSG:function(){return l}});var o=s(5893),a=s(1151),r=s(8691);function t(e){let n=Object.assign({h1:"h1",code:"code",p:"p",a:"a",h2:"h2",pre:"pre",h3:"h3"},(0,a.ah)(),e.components),{Intro:s,Properties:t,Property:l}=n;return s||i("Intro",!0),t||i("Properties",!0),l||i("Property",!0),(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(n.h1,{children:["Local Exec ",(0,o.jsx)(n.code,{children:"local_exec"})]}),"\n",(0,o.jsxs)(s,{children:[(0,o.jsxs)(n.p,{children:["The ",(0,o.jsx)(n.code,{children:"local_exec"})," resource allows the execution of arbitrary commands and scripts\non the local machine. The command runs in the local user space, and has access\nto all the environment variables that the user executing shipyard run has access\ntoo. Additional environment variables, and the working directory for the command\ncan be specified as part of the resource."]}),(0,o.jsx)(n.p,{children:"Log files for exec_local are written to $HOME.jumppad\\logs[name].log"}),(0,o.jsx)(n.p,{children:"Documentation is work in progress, please see the old documentation at:"}),(0,o.jsx)(n.p,{children:(0,o.jsx)(n.a,{href:"https://shipyard.run/docs/resources/exec_local",children:"https://shipyard.run/docs/resources/exec_local"})})]}),"\n",(0,o.jsx)(n.h2,{id:"properties",children:"Properties"}),"\n",(0,o.jsxs)(t,{children:[(0,o.jsxs)(l,{name:"cluster",type:"string",required:"true",value:"",readonly:!0,children:[(0,o.jsx)(n.p,{children:"Text"}),(0,o.jsx)(n.pre,{language:"hcl",code:"code\n",children:(0,o.jsx)(n.code,{className:"language-hcl",children:'<span><span style="color: var(--shiki-color-text)">code</span></span>\n<span></span>'})})]}),(0,o.jsx)(l,{name:"cluster",type:"string",required:"true",value:"",readonly:!0,children:(0,o.jsx)(n.p,{children:"Text"})})]}),"\n",(0,o.jsx)(r.default,{}),"\n",(0,o.jsx)(n.h2,{id:"examples",children:"Examples"}),"\n",(0,o.jsx)(n.h3,{children:"Minimal Example"}),"\n",(0,o.jsx)(n.p,{children:"The following example will run the command consul services register ./config/redis/hcl\nand will wait for it to complete. If the command takes longer than 30s to complete,\nit will be automatically killed."}),"\n",(0,o.jsx)(n.pre,{language:"hcl",code:'resource "local_exec" "exec_standalone" {\n  command = [\n    "consul"\n    "services",\n    "register",\n    "./config/redis.hcl"\n  ]\n\n  environment = {\n    CONSUL_HTTP_ADDR = "http://consul.container.shipyard.run:8500"\n  }\n\n  timeout = "30s"\n}\n',children:(0,o.jsx)(n.code,{className:"language-hcl",children:'<span><span style="color: var(--shiki-token-keyword)">resource</span><span style="color: var(--shiki-token-string-expression)"> &quot;local_exec&quot; &quot;exec_standalone&quot;</span><span style="color: var(--shiki-color-text)"> {</span></span>\n<span><span style="color: var(--shiki-color-text)">  command </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> [</span></span>\n<span><span style="color: var(--shiki-color-text)">    </span><span style="color: var(--shiki-token-string-expression)">&quot;consul&quot;</span></span>\n<span><span style="color: var(--shiki-color-text)">    </span><span style="color: var(--shiki-token-string-expression)">&quot;services&quot;</span><span style="color: var(--shiki-color-text)">,</span></span>\n<span><span style="color: var(--shiki-color-text)">    </span><span style="color: var(--shiki-token-string-expression)">&quot;register&quot;</span><span style="color: var(--shiki-color-text)">,</span></span>\n<span><span style="color: var(--shiki-color-text)">    </span><span style="color: var(--shiki-token-string-expression)">&quot;./config/redis.hcl&quot;</span></span>\n<span><span style="color: var(--shiki-color-text)">  ]</span></span>\n<span></span>\n<span><span style="color: var(--shiki-color-text)">  environment </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> {</span></span>\n<span><span style="color: var(--shiki-color-text)">    CONSUL_HTTP_ADDR = &quot;http://consul.container.shipyard.run:8500&quot;</span></span>\n<span><span style="color: var(--shiki-color-text)">  }</span></span>\n<span></span>\n<span><span style="color: var(--shiki-color-text)">  timeout </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-string-expression)">&quot;30s&quot;</span></span>\n<span><span style="color: var(--shiki-color-text)">}</span></span>\n<span></span>'})}),"\n",(0,o.jsx)(n.h3,{children:"Daemon Mode"}),"\n",(0,o.jsx)(n.p,{children:"The following example runs the command consul agent -dev and immediately returns\nleaving the command to run as a daemon which is not terminated when the shipyard\nrun command completes."}),"\n",(0,o.jsx)(n.p,{children:"Daemons either exit on their own or are killed when running shipyard destroy."}),"\n",(0,o.jsx)(n.pre,{language:"hcl",code:'resource remote_exec "exec_standalone" {\n  command = [\n    "consul"\n    "agent",\n    "-dev",\n  ]\n\n  daemon = true\n}\n',children:(0,o.jsx)(n.code,{className:"language-hcl",children:'<span><span style="color: var(--shiki-color-text)">resource </span><span style="color: var(--shiki-token-keyword)">remote_exec</span><span style="color: var(--shiki-token-string-expression)"> &quot;exec_standalone&quot;</span><span style="color: var(--shiki-color-text)"> {</span></span>\n<span><span style="color: var(--shiki-color-text)">  command </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> [</span></span>\n<span><span style="color: var(--shiki-color-text)">    </span><span style="color: var(--shiki-token-string-expression)">&quot;consul&quot;</span></span>\n<span><span style="color: var(--shiki-color-text)">    </span><span style="color: var(--shiki-token-string-expression)">&quot;agent&quot;</span><span style="color: var(--shiki-color-text)">,</span></span>\n<span><span style="color: var(--shiki-color-text)">    </span><span style="color: var(--shiki-token-string-expression)">&quot;-dev&quot;</span><span style="color: var(--shiki-color-text)">,</span></span>\n<span><span style="color: var(--shiki-color-text)">  ]</span></span>\n<span></span>\n<span><span style="color: var(--shiki-color-text)">  daemon </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">true</span></span>\n<span><span style="color: var(--shiki-color-text)">}</span></span>\n<span></span>'})})]})}var l=!0;function i(e,n){throw Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}n.default=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:n}=Object.assign({},(0,a.ah)(),e.components);return n?(0,o.jsx)(n,Object.assign({},e,{children:(0,o.jsx)(t,e)})):t(e)}},8691:function(e,n,s){"use strict";s.r(n),s.d(n,{__N_SSG:function(){return t}});var o=s(5893),a=s(1151);function r(e){let n=Object.assign({h2:"h2",p:"p",code:"code",a:"a"},(0,a.ah)(),e.components);return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.h2,{id:"meta_properties",children:"Meta Properties"}),"\n",(0,o.jsxs)(n.p,{children:["In addition to the main properties, all resources have meta properties, such\nas the ",(0,o.jsx)(n.code,{children:"id"})," of the resource. To see the list of these properties please see the\n",(0,o.jsx)(n.code,{children:"Meta Properties"})," section in the documentation ",(0,o.jsx)(n.a,{href:"/docs/resources/meta",children:"/docs/resources/meta"}),"."]})]})}var t=!0;n.default=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:n}=Object.assign({},(0,a.ah)(),e.components);return n?(0,o.jsx)(n,Object.assign({},e,{children:(0,o.jsx)(r,e)})):r(e)}}},function(e){e.O(0,[9774,2888,179],function(){return e(e.s=3985)}),_N_E=e.O()}]);